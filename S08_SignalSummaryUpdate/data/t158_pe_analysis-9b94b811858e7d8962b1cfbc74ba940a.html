$(document).ready(function(){var h=$("#signalId").val(),k=$("#isTopic").val(),g=function(e,c,a,b,d){$(e).highcharts({chart:{type:"line"},xAxis:{categories:c},yAxis:{plotLines:[{value:0,width:1,color:"#808080"}],title:{text:b}},series:a,credits:{enabled:!1},title:{text:d}})},f=function(e){return"Positive"==e?"<span style = 'color:red'>(+)</span>":"Negative"==e?"<span style = 'color:green'>(-)</span>":"<span>-</span>"};(function(){"undefined"!=typeof e&&null!=e&&e.destroy();var e=$("#peAnalysisTable").DataTable({language:{url:"../assets/i18n/dataTables_"+
userLocale+".json"},fnInitComplete:function(){$(".show-chart-icon").click(function(){var c=$(this).attr("data-value");$("#show-evdas-chart-modal").modal("show");$.ajax({url:"/signal/aggregateCaseAlert/showCharts?alertId="+c,success:function(a){g("#evdas-count-by-status",a.xAxisTitle,[{name:"Study",data:a.studyCount},{name:"Spon",data:a.sponCount},{name:"Serious",data:a.seriousCount},{name:"Fatal",data:a.fatalCount}],"Counts","Counts");g("#evdas-scores-by-status",a.xAxisTitle,[{name:"PRR",data:a.prrValue},
{name:"ROR",data:a.rorValue},{name:"EBGM",data:a.ebgmValue}],"Scores","Scores");for(var b=[],d=0;d<a.xAxisTitle.length;d++){var c={xAxisTitle:a.xAxisTitle[d],studyCount:a.studyCount[d],sponCount:a.sponCount[d],seriousCount:a.seriousCount[d],fatalCount:a.fatalCount[d]};b.push(c)}d=signal.utils.render("countTable",{trendData:b});$("#trend-div").html(d);b=[];for(d=0;d<a.xAxisTitle.length;d++)c={xAxisTitle:a.xAxisTitle[d],prrValue:a.prrValue[d],rorValue:a.rorValue[d],ebgmValue:a.ebgmValue[d]},b.push(c);
a=signal.utils.render("scoresTable",{trendData:b});$("#scores-div").html(a)}})})},ajax:{url:"/signal/validatedSignal/peAnalysis?id="+h+"&isTopic="+k,dataSrc:""},searching:!1,bLengthChange:!1,bPaginate:!1,bInfo:!1,aoColumns:[{mData:"",mRender:function(c,a,b){return"<span>"+b.dataSource+"</span>"}},{mData:"productName"},{mData:"preferredTerm"},{mData:"",mRender:function(c,a,b){c="";"true"==b.ime&&(c+='<span style="width:37px" class="badge badge-info">IME</span>');"true"==b.dme&&(c+='<span style="width:37px" class="badge badge-purple">DME</span>');
"true"==b.ei&&(c+='<span style="width:37px" class="badge badge-success">EI</span>');"true"==b.sm&&(c+='<span style="width:37px" class="badge badge-warning">SM</span>');return c}},{mData:"",mRender:function(c,a,b){return signal.utils.stacked("<span>"+b.newCount+"</span>","<span>"+b.totalCount+"</span>")}},{mData:"",mRender:function(c,a,b){return signal.utils.stacked("<span>"+b.newFatal+"</span>","<span>"+b.totalFatal+"</span>")}},{mData:"sdr"},{mData:"",mRender:function(c,a,b){return f(b.trend)}},
{mData:"",mRender:function(c,a,b){return signal.utils.stacked("<span>"+b.listed+"</span>","<span>"+b.serious+"</span>")}},{mData:"priority"},{mData:"",mRender:function(c,a,b){return signal.utils.stacked(f(b.prrTrend),f(b.ebgmTrend))}},{mData:"",mRender:function(c,a,b){return'<span tabindex="0" style="cursor: pointer;font-size: 125%;" class="show-chart-icon fa fa-line-chart" data-value="'+b.id+'"></span>'}}],columnDefs:[{targets:"_all",render:$.fn.dataTable.render.text()}]})})()});