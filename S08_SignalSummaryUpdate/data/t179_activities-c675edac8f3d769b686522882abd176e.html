var signal=signal||{};
signal.activities_utils=function(){var e,f=3,h=function(c){var b=[{mData:"type",mRender:function(b,c,a){return"PECDissociated"==a.type?"PEC Dissociated":"PECAssociated"==a.type?"PEC Associated":signal.utils.breakIt(a.type)},className:"col-min-150"},{mData:"details",mRender:function(b,c,a){a.details=a.details.replace(/<br>/g,"\n");return a.justification?"<span class='word-wrap-break-word'>"+escapeHTML(a.details)+" -- with Justification '"+escapeHTML(a.justification)+"'</span>":"<span class='word-wrap-break-word cell-break'>"+
g(a.details)+"</span>"},className:"col-min-200 col-max-300"},{mData:"performedBy",mRender:function(b,c,a){return a.performedByDept&&""!=a.performedByDept?escapeHTML(a.performedBy+" ("+a.performedByDept+")"):a.performedBy},className:"col-min-150"},{mData:"timestamp",mRender:function(b,c,a){return b},className:"col-min-150"}];if("Single Case Alert"==c)b.splice(0,0,{mData:"caseNumber",className:"col-min-100"}),b.splice(2,0,{mData:"suspect",className:"col-min-200"}),b.splice(3,0,{mData:"eventName",className:"col-min-150"}),
b.splice(5,0,{mData:"currentAssignment",mRender:function(b,c,a){return escapeHTML(a.currentAssignmentDept&&""!=a.currentAssignmentDept?a.currentAssignment+" ("+a.currentAssignmentDept+")":a.currentAssignment)},className:"col-min-150"}),f=7;else if("Literature Search Alert"==c)b.splice(0,0,{mData:"articleId",className:"col-min-100"}),b.splice(2,0,{mData:"searchString",className:"col-min-100"}),b.splice(3,0,{mData:"productName",className:"col-min-200"}),b.splice(4,0,{mData:"eventName",className:"col-min-150"}),
b.splice(6,0,{mData:"currentAssignment",mRender:function(b,c,a){return escapeHTML(a.currentAssignmentDept&&""!=a.currentAssignmentDept?a.currentAssignment+" ("+a.currentAssignmentDept+")":a.currentAssignment)},className:"col-min-150"}),f=8;else if("Aggregate Case Alert"==c||"EVDAS Alert"==c)b.splice(1,0,{mData:"suspect",className:"col-min-150"}),b.splice(2,0,{mData:"eventName",className:"col-min-150"}),b.splice(4,0,{mData:"currentAssignment",mRender:function(b,c,a){return escapeHTML(a.currentAssignmentDept&&
""!=a.currentAssignmentDept?a.currentAssignment+" ("+a.currentAssignmentDept+")":a.currentAssignment)},className:"col-min-150"}),f=6;return b},g=function(c){if("undefined"!=typeof c&&null!=c){c=c.split("|");for(var b=document.createElement("div"),d=0;d<c.length;d++){var e=c[d],a=document.createElement("span");a.innerHTML=escapeHTML(e);a.innerHTML=a.innerHTML.replace(/\n/g,"<br>");b.appendChild(a);b.appendChild(document.createElement("br"))}return b.innerHTML}};return{init_activities_table:function(c,
b,d){d=h(d);return e=$(c).DataTable({sPaginationType:"bootstrap",language:{url:"../assets/i18n/dataTables_"+userLocale+".json"},ajax:{url:b,dataSrc:""},fnDrawCallback:function(){$('a[href="#activities"]').on("shown.bs.tab",function(b){$("#activitiesTable").DataTable().ajax.url(getActivityUrl()).load();addGridShortcuts("#activitiesTable");removeGridShortcuts("#alertsDetailsTable");removeGridShortcuts("#archivedAlertsTable")})},aaSorting:[[f,"desc"]],bLengthChange:!0,iDisplayLength:10,bAutoWidth:!1,
aoColumns:d,scrollX:!0,scrollY:"calc(100vh - 301px)",autoWidth:!0,columnDefs:[{targets:"_all",render:$.fn.dataTable.render.text()}]})},process_description:g,reload_activity_table:function(){"undefined"!=typeof e&&null!=e?e.ajax.reload():console.log("Unable to reload the activity table. Please refresh the page.")}}}();
function getActivityUrl(){return applicationName===ALERT_CONFIG_TYPE.LITERATURE_SEARCH_ALERT?alertActivities:applicationName===ALERT_CONFIG_TYPE.SIGNAL_MANAGEMENT?activityUrl:alertActivitiesUrl+"?executedIdList="+executedIdList+"&appType="+applicationName};