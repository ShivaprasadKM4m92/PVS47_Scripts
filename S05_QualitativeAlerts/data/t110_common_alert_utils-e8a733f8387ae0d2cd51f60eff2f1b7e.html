var dataSources={PVA:"pva","Vigi Base":"vigibase",FAERS:"faers",EUDRA:"eudra"};
$(document).ready(function(){$("button.addGenericValues").on("click",function(){a()});$("button.clearGenericValues").on("click",function(){$("#js-data-generics").val(null).trigger("change")});$("#eventModal").on("shown.bs.modal",function(){$("#eventSmqSelect").on("change",function(){null!==$(this).val()?$("#eventModal").find("input[type=text]").attr("disabled",!0).val(""):$("#eventModal").find("input[type=text]").attr("disabled",!1)})});var a=function(){var b=[],a=$("#js-data-generics").select2("data");
$.each(a,function(a,d){a={genericName:d.text};b.push(d.text);productValues[5].push(a)});0<b.length&&($("#productSelection").val(JSON.stringify(productValues)),$("#showGenericSelection").html(""),$("#showGenericSelection").append("<div style='padding: 5px'>"+b+"</div>"))};$("#myDatePicker").datepicker({date:$("#myDatePicker").val()?new Date($("#myDatePicker").val()):null,momentConfig:{culture:userLocale,tz:userTimeZone,format:DEFAULT_DATE_DISPLAY_FORMAT}});$(".dispositions").select2();(function(){$("#js-data-generics").select2({placeholder:"Search For Generic Names",
minimumInputLength:1,multiple:!0,allowClear:!0,ajax:{url:searchGenericsUrl,dataType:"json",data:function(b){return{term:b.term,max:b.page||10}},processResults:function(b,a){a.page=a.page||10;return{results:b,pagination:{more:10*a.page<b.length}}}}}).on("select2:select",function(a){$("#js-data-generics").append(a.params.data.id)})})();(function(){$("input:radio[name=optradio]").click(function(){$(this).hasClass("productRadio")?($($("#showProductSelection").parent()).removeAttr("hidden"),$($("#showStudySelection").parent()).attr("hidden",
"hidden"),$($("#showGenericSelection").parent()).attr("hidden","hidden"),$($("#showProductGroupSelection").parent()).attr("hidden","hidden")):$(this).hasClass("studyRadio")?($($("#showStudySelection").parent()).removeAttr("hidden"),$($("#showProductSelection").parent()).attr("hidden","hidden"),$($("#showGenericSelection").parent()).attr("hidden","hidden"),$($("#showProductGroupSelection").parent()).attr("hidden","hidden")):$(this).hasClass("genericRadio")?($($("#showGenericSelection").parent()).removeAttr("hidden"),
$($("#showProductSelection").parent()).attr("hidden","hidden"),$($("#showStudySelection").parent()).attr("hidden","hidden"),$($("#showProductGroupSelection").parent()).attr("hidden","hidden")):$(this).hasClass("productGroupRadio")&&($($("#showGenericSelection").parent()).attr("hidden","hidden"),$($("#showProductSelection").parent()).attr("hidden","hidden"),$($("#showStudySelection").parent()).attr("hidden","hidden"),$($("#showProductGroupSelection").parent()).removeAttr("hidden"));$("#productSelection").val("");
$("#showProductSelection").html("");$("#showStudySelection").html("");$("#studySelection").val("");$("#showGenericSelection").html("");$("#genericSelection").val("");$("#showProductGroupSelection").html("");$("#productGroups").val("");$("#productGroups").trigger("change")})})();showHideReportsSection()});
function addAllowedUsersList(){if($("#productSelection").val()){var a=JSON.parse($("#productSelection").val()),a=getProductNameList(a);$.ajax({url:fetchAllowedUsersUrl,data:{productList:a},success:function(a){$("#selectedDatasource").val()!=dataSources.FAERS&&($("#assignedTo").html(""),$("#assignedTo").append('<option value="null">--Select One--</option>'),$.each(a,function(){$("#assignedTo").append('<option value="'+this.id+'">'+this.fullName+"</option>")}));$("#assignedTo").data("value")&&$("#assignedTo").val($("#assignedTo").data("value"))}})}}
function addDrugClassificationList(){if($("#selectedDatasource").val()===dataSources.FAERS){var a=JSON.parse($("#productSelection").val()),a=getDictionaryNameList(a);$.ajax({url:fetchDrugClassificationUrl,data:{product:a},success:function(a){$("#drugClassification").html("");$("#drugClassification").append('<option value="">--Select One--</option>');$.each(a,function(){$("#drugClassification").append('<option value="'+this.className+'">'+this.className+"</option>")});$("#drugClassification").data("value")&&
$("#drugClassification").val($("#drugClassification").data("value"))}})}}function getProductNameList(a){var b=[];$.each(a["3"],function(a,c){b.push(c.name)});return b.join(",")}function getDictionaryNameList(a){var b=[];$.each(a,function(a,c){$.each(c,function(a,c){b.push(c.name)})});return b.join(",")}
function showHideReportsSection(){$("#selectedDatasource").on("change",function(){if($("#selectedDatasource").val()===dataSources.FAERS){$("#templateQueryList").removeClass("show");$("#templateQueryList").addClass("hide");$(".report-section-buttons").removeClass("show");$(".report-section-buttons").addClass("hide");$(".drugClassificationContainer").show();$(".spotfire_type").val(null).trigger("change");$(".spotfire_type").empty();var a=new Option("Drug","DRUG",!1,!1);$(".spotfire_type").append(a).trigger("change.select2")}else{$("#templateQueryList").removeClass("hide");
$("#templateQueryList").addClass("show");$(".report-section-buttons").removeClass("hide");$(".report-section-buttons").addClass("show");$(".drugClassificationContainer").hide();$(".spotfire_type").val(null).trigger("change");$(".spotfire_type").empty();var a=new Option("Drug","DRUG",!1,!1),b=new Option("Vaccine","VACCINE",!1,!1);$(".spotfire_type").append(a).trigger("change.select2");$(".spotfire_type").append(b).trigger("change.select2")}});$("#selectedDatasource").val()===dataSources.FAERS&&($("#reportSection").removeClass("hide"),
$("#reportSection").addClass("show"),$(".drugClassificationContainer").show())};